<?xml version="1.0" encoding="utf-8"?>
<smartdz>
    <!-- Form View -->
    <record id="dw_meeting_summary_view_form" model="ir.ui.view">
        <field name="name">dw.meeting.summary.form</field>
        <field name="model">dw.meeting.summary</field>
        <field name="arch" type="xml">
            <form string="Meeting Summary">
                <header>
                    <button name="action_validate" string="Validate" type="object"
                            invisible="state != 'draft'"
                            class="btn-primary"/>
                    <button name="action_send_to_participants" string="Send to Participants" type="object"
                            invisible="state != 'validated'"
                            class="btn-success"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,validated,sent"/>
                </header>

                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>

                    <!-- Metadata -->
                    <group>
                        <group>
                            <field name="meeting_id" readonly="1"/>
                            <field name="meeting_duration" readonly="1"/>
                            <field name="participants_count" readonly="1"/>
                            <field name="actions_count" readonly="1"/>
                        </group>
                        <group>
                            <field name="generated_by" readonly="1"/>
                            <field name="generation_date" readonly="1"/>
                            <field name="ai_model_used" readonly="1"/>
                        </group>
                    </group>

                    <!-- Summary Content -->
                    <notebook>
                        <page string="Executive Summary">
                            <field name="executive_summary" nolabel="1"/>
                        </page>

                        <page string="Key Decisions">
                            <field name="key_decisions" nolabel="1"/>
                        </page>

                        <page string="Action Items">
                            <field name="action_items_summary" nolabel="1"/>
                        </page>

                        <page string="Discussion Points">
                            <field name="discussion_points" nolabel="1"/>
                        </page>

                        <page string="Participants">
                            <field name="participants_summary" nolabel="1" readonly="1"/>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <!-- List View -->
    <record id="dw_meeting_summary_view_list" model="ir.ui.view">
        <field name="name">dw.meeting.summary.list</field>
        <field name="model">dw.meeting.summary</field>
        <field name="arch" type="xml">
            <list string="Meeting Summaries">
                <field name="name"/>
                <field name="meeting_id"/>
                <field name="generation_date"/>
                <field name="participants_count"/>
                <field name="actions_count"/>
                <field name="state" decoration-info="state == 'draft'"
                       decoration-success="state == 'validated'"
                       decoration-muted="state == 'sent'"/>
            </list>
        </field>
    </record>

    <record id="action_meeting_summary" model="ir.actions.act_window">
        <field name="name">Meeting Summaries</field>
        <field name="res_model">dw.meeting.summary</field>
        <field name="view_mode">list,form</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No meeting summaries yet
            </p>
            <p>
                Generate AI-powered summaries from your meetings to capture key decisions, action items, and discussion points.
            </p>
        </field>
    </record>

    <!-- Email Template -->
    <record id="email_template_meeting_summary" model="mail.template">
        <field name="name">Meeting Summary</field>
        <field name="model_id" ref="model_dw_meeting_summary"/>
        <field name="subject">Meeting Summary: {{ object.meeting_id.name }}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto;">
                <h2 style="color: #3b82f6;">Meeting Summary: {{ object.meeting_id.name }}</h2>

                <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <p><strong>Date:</strong> {{ object.meeting_id.planned_start_datetime }}</p>
                    <p><strong>Duration:</strong> {{ object.meeting_duration }} hours</p>
                    <p><strong>Participants:</strong> {{ object.participants_summary }}</p>
                </div>

                <h3>Executive Summary</h3>
                <div style="margin-bottom: 20px;">
                    {{ object.executive_summary }}
                </div>

                <h3>Key Decisions</h3>
                <div style="margin-bottom: 20px;">
                    {{ object.key_decisions }}
                </div>

                <h3>Action Items</h3>
                <div style="margin-bottom: 20px;">
                    {{ object.action_items_summary }}
                </div>

                <h3>Discussion Points</h3>
                <div style="margin-bottom: 20px;">
                    {{ object.discussion_points }}
                </div>

                <p style="color: #64748b; font-size: 12px; margin-top: 40px;">
                    This summary was automatically generated on {{ object.generation_date }}.
                </p>
            </div>
        </field>
    </record>
</smartdz>